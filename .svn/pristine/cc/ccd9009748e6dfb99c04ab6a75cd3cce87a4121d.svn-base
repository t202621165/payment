package com.cypay.payment;

import com.alibaba.fastjson.JSONObject;
import com.cypay.common.enums.PaymentType;
import com.cypay.common.service.impl.SystemSetService;

import cn.hutool.crypto.SecureUtil;

public class Authorize {

	public static void main(String[] args) throws Exception {
		JSONObject json = new JSONObject();
		int[] g = new int[]{7,12}; // 授权通道的index
		json.put("G", g); // 授权通道
//		json.put("G", "1"); // 授权通道：1：全部通道
		json.put("E", "1"); // 1：企业版；0：个人版
		json.put("A", "1"); // 支付宝代付
		json.put("W", "1"); // 微信代付
		json.put("D", "200605"); // 到期时间：yyMMdd
		String ip = "43.227.222.195:81"; // 授权的ip + 端口
		json.put("S", SecureUtil.md5(String.format("%s@@%s", json.toJSONString(), SystemSetService.MD5_KEY)));
		String data = json.toJSONString();
		String key = SecureUtil.md5(String.format("%s@%s", ip, SystemSetService.AES_KEY));
		System.out.println("授权码：");
		System.out.println(SecureUtil.aes(key.getBytes()).encryptBase64(data) + "." + SecureUtil.aes(SystemSetService.AES_KEY.getBytes()).encryptBase64(ip));
		System.out.println("-------------------可授权通道----------------------------");
		int i = 0;
		for (PaymentType type : PaymentType.values()) {
			if (!type.getIsOpen()) {
				System.out.println(i++ + "	" + type.getName());
			}
		}
	}
}
